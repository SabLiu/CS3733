<html>
<head>
<script type='text/javascript' src='../api.js'></script>
<script type='text/javascript' src='../list_local_segments.js'></script>
<script type='text/javascript' src='../list_playlists.js'></script>
<script type='text/javascript' src='../upload_segment.js'></script>
<script type='text/javascript' src='../create_playlist.js'></script>
<script type='text/javascript' src='../delete_playlist.js'></script>
<script type='text/javascript' src='../delete_local_segment.js'></script>
<script type='text/javascript' src='../view_playlist.js'></script>
<script type='text/javascript' src='../search_segments.js'></script>

<script type="text/javascript">

function initialize(){
	//get all segments
	var isAdmin = 0; 
	refreshLocalSegmentsList(isAdmin);
	refreshPlaylistsList();
}
</script>
</head><body onload="initialize()">
	<title></title>

<h2>Participant&nbsp;</h2>

<hr />
<p><b>Playlists</b></p>

<form name="playlistForm" method="post">  
 	<input name="PLname" value="Enter playlist name" />
 	<input type="button" id="createPLButton" value="Create Playlist" onClick="JavaScript:handleCreatePlaylistClick(this)">
</form>

<p>&nbsp;</p>

<div id="playlists"></div>

<p>&nbsp;</p>

<p><b>View a playlist &nbsp;</b></p>
<p><b>Current Playlist: Playlist name goes here&nbsp;</b></p>

<div id="currentPlaylist"></div>
<hr />
<p><b>Upload a new local segment </b></p>

<form name="createForm" method="post">
   <input name="character" value="Character speaking" />
   <input name="sentence" value="Sentence spoken" /><br /> 
   <input name="base64Encoding" hidden value=""/> 
 	Select a video file: <input type="file" id="videoFile" name="videoFile">  
 	<input type="button" id="uploadButton" value="Upload segment" disabled onClick="JavaScript:handleUploadClick(this)">
 	<br />Note: Must upload an ogg file. 

</form>
<script>
	// from Professor Heineman's calculator.html. 
	// Magic file processing stuff!
	
//called in handleFileSelect()
  // prepares the base64-encoded string and enabled button
  function getBase64(file) {
	var reader = new FileReader();
	reader.readAsDataURL(file);

	reader.onload = function () {
	  document.createForm.base64Encoding.value = reader.result;
	  document.createForm.uploadButton.disabled = false;
	};
  }

  // When file is selected, stash base64 value in the encoding field.  
  function handleFileSelect(evt) {
    var files = evt.target.files; 
    if (files[0].size > 500000000) {  // changeable value. currently 5 MB 
    	document.createForm.base64Encoding.value = "";
    	alert("File size too large to use:" + files[0].size + " bytes");
    } else {
    	getBase64(files[0]); // request the load (async)
    }
  }
  
  // register
  document.getElementById('videoFile').addEventListener('change', handleFileSelect, false);
</script>

<hr />
<p><b>Local Segments</b></p>
<p>&nbsp;</p>

<div id="model"></div>

<p>&nbsp;</p>

</br>

<p><strong>Available Remote Segments</strong></p>

<hr />
<p><b>Search for a Segment</b></p>

<p>Search by character speaking and/or spoken word(s)</p>

<form name="searchForm" method="post">
   <p>Character:       <input name="searchBarCharacter" type = "text" value = ""/></br>
Spoken word(s): <input name="searchBarWords" type = "text" value = ""/> </br>
<input name="searchbtn" type="button" value="Search" onClick = "JavaScript:processSearch()"/></p>


</form>

<p><strong>Search Results</strong></p>
<p>&nbsp;</p>

<div id="searchResultsList"></div>

<p>&nbsp;</p>